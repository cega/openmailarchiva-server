<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">

<struts-config>

  <form-beans>
    <form-bean name="accountBean" type="com.stimulus.archiva.presentation.AccountBean"/>
    <form-bean name="searchBean" type="com.stimulus.archiva.presentation.SearchBean"/>
    <form-bean name="messageBean" type="com.stimulus.archiva.presentation.MessageBean"/>
    <form-bean name="configBean" type="com.stimulus.archiva.presentation.ConfigBean"/>
  </form-beans>

  <global-exceptions>
    <exception key="errors.general" type="java.lang.Exception" handler="com.stimulus.struts.ActionExceptionHandler" path="/common/error.jsp"/>
  </global-exceptions>

  <global-forwards>
    <forward name="failure" path="/common/error.jsp"/>
    <forward name="error" path="/common/error.jsp"/>
    <forward name="signon" path="/account/signon.jsp"/>
  </global-forwards>

  <action-mappings>

    <!-- SEARCH ACTIONS -->
    
   
    <action path="/search" type="com.stimulus.struts.BeanAction"
      name="searchBean" scope="session"
      validate="false">
      <forward name="success" path="/search/search.jsp"/>
      <forward name="reload" path="/search/search.jsp"/>
    </action>
   
    
    
    <action path="/searchpage" type="com.stimulus.struts.BeanAction"
      name="searchBean" scope="session" parameter="*"
      validate="false" >
      <forward name="success" path="/search/search.jsp"/>
    </action>
    
    <action path="/configurationform" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" 
      validate="false" >
      <forward name="success" path="/configuration/configurationform.jsp"/>
    </action>
    
    <action path="/configure" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" 
      validate="true" input="/configuration/configurationform.jsp" >
      <forward name="success" path="/search/search.jsp"/>
      <forward name="reload" path="/configuration/configurationform.jsp"/>
    </action>
    
    <action path="/indexstatus" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" parameter="*"
      validate="false" >
      <forward name="success" path="/configuration/indexstatus.jsp"/>
    </action>
    
    <action path="/lookuprolecriterionform" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" parameter="*"
      validate="false" >
      <forward name="success" path="/configuration/lookuprolecriterion.jsp"/>
    </action>
    
    <action path="/lookuprolecriterion" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" 
      validate="false" >
      <forward name="success" path="/configuration/lookuprolecriterion.jsp"/>
    </action>
    
    <action path="/testlogin" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" 
      validate="false" >
      <forward name="success" path="/configuration/testlogin.jsp"/>
    </action>
    
    <action path="/testloginform" type="com.stimulus.struts.BeanAction"
      name="configBean" scope="session" parameter="*"
      validate="false" >
      <forward name="success" path="/configuration/testlogin.jsp"/>
    </action>
    
     <action path="/calendar" type="com.stimulus.struts.BeanAction"
      name="searchBean" scope="session" parameter="*"
      validate="false" >
      <forward name="success" path="/common/calendar.html"/>
    </action>
    
    
    <action path="/viewmail" type="com.stimulus.struts.BeanAction"
      name="messageBean" scope="session" 
      validate="false" >
      <forward name="success" path="/message/viewmail.jsp"/>
    </action>
   
    <action path="/downloadattachment" type="com.stimulus.archiva.presentation.DownloadBean"
      name="messageBean" scope="session" 
      validate="false">
      <forward name="success" path="/message/viewmail.jsp"/>
    </action>
    
    <action path="/downloadmessage" type="com.stimulus.archiva.presentation.DownloadMessageBean"
      name="messageBean" scope="session" 
      validate="false">
      <forward name="success" path="/message/viewmail.jsp"/>
    </action>
    
    <!-- ACCOUNT ACTIONS -->

   <action path="/signonform" type="com.stimulus.struts.BeanAction"
      name="accountBean" scope="session" parameter="*"
      validate="false">
      <forward name="success" path="/account/signonform.jsp"/>
    </action>

    <action path="/signon" type="com.stimulus.struts.BeanAction"
      name="accountBean" scope="session"
      validate="false">
      <forward name="success" path="/search/search.jsp"/>
      <forward name="failure" path="/account/signonform.jsp"/>
    </action>
    
    <action path="/signoff" type="com.stimulus.struts.BeanAction"
      name="accountBean" scope="session"
      validate="false">
      <forward name="success" path="/account/signonform.jsp"/>
    </action>
    
    <!-- UPLOAD ACTIONS -->
    
    <action path="/uploadform" type="com.stimulus.struts.BeanAction"
      name="messageBean" scope="session" parameter="*"
      validate="false">
      <forward name="success" path="/testdata/uploadform.jsp"/>
    </action>

    <action path="/upload" type="com.stimulus.struts.BeanAction"
      name="messageBean" scope="session"
      validate="false">
      <forward name="success" path="/search/searchform.jsp"/>
    </action>
    
    <!-- STRUTS LAYOUT -->
    <action path="/sort"
	type="fr.improve.struts.taglib.layout.sort.SortAction"
	scope="request"
	validate="false">
	</action>
    
	<action path="/treeview"
		type="fr.improve.struts.taglib.layout.treeview.TreeviewAction"
		scope="request"
		validate="false">
	</action>


  </action-mappings>

  <message-resources parameter="properties.application"/>

  <plug-in className="com.stimulus.archiva.plugin.Startup">	
	</plug-in>
	
	
</struts-config>
